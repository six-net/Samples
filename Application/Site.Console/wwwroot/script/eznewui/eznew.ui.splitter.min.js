(function (b) {
    b.EZNEW.EZNEWUI("EZNEWSplitter", "", {}); b.extend(b.EZNEW._EZNEWSplitter.prototype, {
        defineInstance: function () { var a = { width: 300, height: 300, panels: [], orientation: "vertical", disabled: false, splitBarSize: 5, touchSplitBarSize: 15, panel1: null, panel2: null, _eventsMap: { mousedown: b.EZNEW.mobile.getTouchEventName("touchstart"), mouseup: b.EZNEW.mobile.getTouchEventName("touchend"), mousemove: b.EZNEW.mobile.getTouchEventName("touchmove"), mouseenter: "mouseenter", mouseleave: "mouseleave" }, _isTouchDevice: false, _isNested: false, resizable: true, touchMode: "auto", showSplitBar: true, initContent: null, _events: ["resize", "expanded", "collapsed", "resizeStart", "layout"] }; if (this === b.EZNEW._EZNEWSplitter.prototype) { return a } b.extend(true, this, a); return a }, createInstance: function () { this.render() }, _initOverlay: function (a) { if (this.overlay || a == "undefined") { this.overlay.remove(); this.overlay = null } else { if (a == true) { this.overlay = b("<div style='z-index: 100; background: #fff;'></div>"); this.overlay.css("opacity", 0.01); this.overlay.css("position", "absolute"); this.overlay.appendTo(b(document.body)); var d = this.host.coord(); this.overlay.css("left", "0px"); this.overlay.css("top", "0px"); this.overlay.width(b(window).width()); this.overlay.height(b(window).height()); this.overlay.addClass("EZNEW-disableselect"); if (this.orientation == "horizontal") { this.overlay.css("cursor", "row-resize") } else { this.overlay.css("cursor", "col-resize") } } } }, _startDrag: function (a) { if (a.target == this.splitBarButton[0] || this.disabled) { return true } if (this.panels[0].collapsed || this.panels[1].collapsed || !this.resizable) { return true } if (this.overlay == null) { this._dragging = true; this._initOverlay(true); this._dragStart = b.EZNEW.position(a); return false } return true }, _drag: function (z) { if (this.panels[0].collapsed || this.panels[1].collapsed || this.disabled) { return true } if (!this._dragging) { return true } var s = this.orientation == "horizontal" ? "top" : "left"; var q = this.orientation == "vertical" ? "width" : "height"; this._position = b.EZNEW.position(z); if (this.overlay && !this._splitBarClone) { if (Math.abs(this._position[s] - this._dragStart[s]) >= 3) { var o = this.splitBar.coord(); this._cloneStart = { left: o.left, top: o.top }; this._splitBarClone = this._createSplitBarClone(); this._raiseEvent(3, { panels: this.panels }); return } } if (this._splitBarClone) { var r, y; var a = this.host[q](); var x = a / 100; var v = 1 / x; var t = 0; var p = this._splitBarClone[q]() + 2; var u = parseInt(this.host.coord()[s]); var w = this._position[s] - this._dragStart[s] + this._cloneStart[s] - u; if (t > w) { w = t } if (w > a + t - p) { w = a + t - p } r = this.panels[0].min; y = this.panels[1].min; if (y.toString().indexOf("%") != -1) { y = parseFloat(y) * x } if (r.toString().indexOf("%") != -1) { r = parseFloat(r) * x } this._splitBarClone.removeClass(this.toThemeProperty("EZNEW-splitter-splitbar-invalid")); if (w < r) { this._splitBarClone.addClass(this.toThemeProperty("EZNEW-splitter-splitbar-invalid")); w = r } if (w > a + t - p - y) { this._splitBarClone.addClass(this.toThemeProperty("EZNEW-splitter-splitbar-invalid")); w = a + t - p - y } this._splitBarClone.css(s, w); if (z.preventDefault) { z.preventDefault() } if (z.stopPropagation) { z.stopPropagation() } return false } return true }, resize: function (d, a) { this.width = d; this.height = a; this._arrange() }, _resize: function () { var i = this.orientation == "horizontal" ? "height" : "width"; var k = this.orientation == "horizontal" ? "top" : "left"; var n = this._splitBarClone.css(k); var a = this.host[i](); var l = a / 100; var m = 1 / l; var j = this.panels[0].size; if (j.toString().indexOf("%") != -1) { this.panels[0].size = parseFloat(n) * m + "%"; this.panels[1].size = 100 - (parseFloat(n) * m) + "%" } else { this.panels[0].size = parseFloat(n); this.panels[1].size = a - parseFloat(n) } this._layoutPanels(); this._raiseEvent(0, { panels: this.panels }) }, _stopDrag: function () { if (this._dragging) { this._initOverlay() } this._dragging = false; if (this._splitBarClone) { if (this.panels[0].collapsed || this.panels[1].collapsed || this.disabled) { return true } this._resize(); this._splitBarClone.remove(); this._splitBarClone = null } }, _createSplitBarClone: function () { var a = this.splitBar.clone(); a.fadeTo(0, 0.7); a.css("z-index", 99999); if (this.orientation == "vertical") { a.css("cursor", "col-resize") } else { a.css("cursor", "row-resize") } this.host.append(a); return a }, _eventName: function (a) { if (this._isTouchDevice) { return this._eventsMap[a] } else { return a } }, _addHandlers: function () {
            var f = this; b.EZNEW.utilities.resize(this.host, function () { f._layoutPanels() }); this.addHandler(this.splitBar, "dragstart." + this.element.id, function (c) { return false }); if (this.splitBarButton) {
                this.addHandler(this.splitBarButton, "click." + this.element.id, function () { var c = function (d) { if (!d.collapsed) { f.collapse() } else { f.expand() } }; if (f.panels[0].collapsible) { c(f.panels[0]) } else { if (f.panels[1].collapsible) { c(f.panels[1]) } } }); this.addHandler(this.splitBarButton, this._eventName("mouseenter"), function () { f.splitBarButton.addClass(f.toThemeProperty("EZNEW-splitter-collapse-button-hover")); f.splitBarButton.addClass(f.toThemeProperty("EZNEW-fill-state-hover")) }); this.addHandler(this.splitBarButton, this._eventName("mouseleave"), function () {
                    f.splitBarButton.removeClass(f.toThemeProperty("EZNEW-splitter-collapse-button-hover"));
                    f.splitBarButton.removeClass(f.toThemeProperty("EZNEW-fill-state-hover"))
                })
            } this.addHandler(b(document), this._eventName("mousemove") + "." + this.element.id, function (c) { return f._drag(c) }); this.addHandler(b(document), this._eventName("mouseup") + "." + this.element.id, function () { return f._stopDrag() }); this.addHandler(this.splitBar, this._eventName("mousedown"), function (c) { return f._startDrag(c) }); this.addHandler(this.splitBar, this._eventName("mouseenter"), function () { if (f.resizable && !f.disabled) { f.splitBar.addClass(f.toThemeProperty("EZNEW-splitter-splitbar-hover")); f.splitBar.addClass(f.toThemeProperty("EZNEW-fill-state-hover")) } }); this.addHandler(this.splitBar, this._eventName("mouseleave"), function () { if (f.resizable && !f.disabled) { f.splitBar.removeClass(f.toThemeProperty("EZNEW-splitter-splitbar-hover")); f.splitBar.removeClass(f.toThemeProperty("EZNEW-fill-state-hover")) } }); if (document.referrer != "" || window.frameElement) { if (window.top != null && window.top != window.self) { var e = null; if (window.parent && document.referrer) { e = document.referrer } if (e && e.indexOf(document.location.host) != -1) { var a = function (c) { f._stopDrag() }; if (window.top.document.addEventListener) { window.top.document.addEventListener("mouseup", a, false) } else { if (window.top.document.attachEvent) { window.top.document.attachEvent("onmouseup", a) } } } } }
        }, _removeHandlers: function () { this.removeHandler(b(window), "resize." + this.element.id); if (this.splitBarButton) { this.removeHandler(this.splitBarButton, "click." + this.element.id); this.removeHandler(this.splitBarButton, this._eventName("mouseenter")); this.removeHandler(this.splitBarButton, this._eventName("mouseleave")) } this.removeHandler(b(document), this._eventName("mousemove") + "." + this.element.id); this.removeHandler(b(document), this._eventName("mouseup") + "." + this.element.id); if (this.splitBar) { this.removeHandler(this.splitBar, "dragstart." + this.element.id); this.removeHandler(this.splitBar, this._eventName("mousedown")); this.removeHandler(this.splitBar, this._eventName("mouseenter")); this.removeHandler(this.splitBar, this._eventName("mouseleave")) } }, render: function () { if (this.splitBar) { this.splitBar.remove() } var h = this.host.children(); if (h.length != 2) { throw "Invalid HTML Structure! EZNEWSplitter requires 1 container DIV tag and 2 nested DIV tags." } if (h.length == 2) { var f = h[0].className.split(" "); var a = h[1].className.split(" "); if (f.indexOf("EZNEW-reset") != -1 && f.indexOf("EZNEW-splitter") != -1 && f.indexOf("EZNEW-UI") != -1) { throw "Invalid HTML Structure! Nested EZNEWSplitter cannot be initialized from a Splitter Panel. You need to add a new DIV tag inside the Splitter Panel and initialize the nested EZNEWSplitter from it!" } if (a.indexOf("EZNEW-reset") != -1 && a.indexOf("EZNEW-splitter") != -1 && a.indexOf("EZNEW-UI") != -1) { throw "Invalid HTML Structure! Nested EZNEWSplitter cannot be initialized from a Splitter Panel. You need to add a new DIV tag inside the Splitter Panel and initialize the nested EZNEWSplitter from it!" } } if (this.host.parent().length > 0 && this.host.parent()[0].className.indexOf("EZNEW-splitter") != -1) { if (this.element.className.indexOf("EZNEW-splitter-panel") != -1) { throw "Invalid HTML Structure! Nested EZNEWSplitter cannot be initialized from a Splitter Panel. You need to add a new DIV tag inside the Splitter Panel and initialize the nested EZNEWSplitter from it!" } this._isNested = true; if (this.width == 300) { this.width = "100%" } if (this.height == 300) { this.height = "100%" } if (this.width == "100%" && this.height == "100%") { this.host.addClass("EZNEW-splitter-nested"); if (this.host.parent()[0].className.indexOf("EZNEW-splitter-panel") != -1) { this.host.parent().addClass("EZNEW-splitter-panel-nested") } } } this._hasBorder = (this.host.hasClass("EZNEW-hideborder") == false) || this.element.style.borderTopWidth != ""; this._removeHandlers(); this._isTouchDevice = b.EZNEW.mobile.isTouchDevice(); this._validate(); this.panel1.css("left", "0px"); this.panel1.css("top", "0px"); this.panel2.css("left", "0px"); this.panel2.css("top", "0px"); this.splitBar = b("<div><div></div></div>"); if (!this.resizable) { this.splitBar.css("cursor", "default") } this.splitBarButton = this.splitBar.find("div:last"); this._setTheme(); this.splitBar.insertAfter(this.panel1); this._arrange(); if (this.panels[0].collapsible == false && this.panels[1].collapsible == false) { this.splitBarButton.hide() } var g = this; this._addHandlers(); if (this.initContent) { this.initContent() } if (this.disabled) { this.disable() } }, _hiddenParent: function () { return b.EZNEW.isHidden(this.host) }, _setTheme: function () {
            this.panel1.addClass(this.toThemeProperty("EZNEW-UI-content")); this.panel2.addClass(this.toThemeProperty("EZNEW-UI-content")); this.panel1.addClass(this.toThemeProperty("EZNEW-splitter-panel")); this.panel2.addClass(this.toThemeProperty("EZNEW-splitter-panel")); this.panel1.addClass(this.toThemeProperty("EZNEW-reset")); this.panel2.addClass(this.toThemeProperty("EZNEW-reset")); this.host.addClass(this.toThemeProperty("EZNEW-reset")); this.host.addClass(this.toThemeProperty("EZNEW-splitter")); this.host.addClass(this.toThemeProperty("EZNEW-UI")); this.host.addClass(this.toThemeProperty("EZNEW-UI-content"));
            this.splitBar.addClass(this.toThemeProperty("EZNEW-splitter-splitbar-" + this.orientation)); this.splitBar.addClass(this.toThemeProperty("EZNEW-fill-state-normal")); this.splitBarButton.addClass(this.toThemeProperty("EZNEW-splitter-collapse-button-" + this.orientation)); this.splitBarButton.addClass(this.toThemeProperty("EZNEW-fill-state-pressed"))
        }, _validate: function () { var a = this.host.children(); if (a.length != 2) { throw "Invalid HTML Structure! EZNEWSplitter requires two nested DIV tags!" } if (this.panels && !this.panels[1]) { if (!this.panels[0]) { this.panels = [{ size: "50%" }, { size: "50%" }] } else { this.panels[1] = {} } } else { if (this.panels == undefined) { this.panels = [{ size: "50%" }, { size: "50%" }] } } var a = this.host.children(); this.panel1 = this.panels[0].element = b(a[0]); this.panel2 = this.panels[1].element = b(a[1]); this.panel1[0].style.minWidth = ""; this.panel1[0].style.maxWidth = ""; this.panel2[0].style.minWidth = ""; this.panel2[0].style.maxWidth = ""; b.each(this.panels, function () { if (this.min == undefined) { this.min = 0 } if (this.size == undefined) { this.size = 0 } if (this.size < 0) { this.size = 0 } if (this.min < 0) { this.min = 0 } if (this.collapsible == undefined) { this.collapsible = true } if (this.collapsed == undefined) { this.collapsed = false } if (this.size != 0) { if (this.size.toString().indexOf("px") != -1) { this.size = parseInt(this.size) } if (this.size.toString().indexOf("%") == -1) { if (parseInt(this.min) > parseInt(this.size)) { this.min = this.size } } else { if (this.min.toString().indexOf("%") != -1) { if (parseInt(this.min) > parseInt(this.size)) { this.min = this.size } } } } }) }, _arrange: function () { if (this.width != null) { var e = this.width; if (typeof e != "string") { e = parseInt(this.width) + "px" } this.host.css("width", e) } if (this.height != null) { var a = this.height; if (typeof a != "string") { a = parseInt(this.height) + "px" } this.host.css("height", a) } this._splitBarSize = !this._isTouchDevice ? this.splitBarSize : this.touchSplitBarSize; if (!this.showSplitBar) { this._splitBarSize = 0; this.splitBar.hide() } var f = this.orientation == "horizontal" ? "width" : "height"; this.splitBar.css(f, "100%"); this.panel1.css(f, "100%"); this.panel2.css(f, "100%"); if (this.orientation == "horizontal") { this.splitBar.height(this._splitBarSize) } else { this.splitBar.width(this._splitBarSize) } if (this.orientation === "vertical") { this.splitBarButton.width(this._splitBarSize); this.splitBarButton.height(45) } else { this.splitBarButton.height(this._splitBarSize); this.splitBarButton.width(45) } this.splitBarButton.css("position", "relative"); if (this.orientation === "vertical") { this.splitBarButton.css("top", "50%"); this.splitBarButton.css("left", "0"); this.splitBarButton.css("margin-top", "-23px"); this.splitBarButton.css("margin-left", "-0px") } else { this.splitBarButton.css("left", "50%"); this.splitBarButton.css("top", "0"); this.splitBarButton.css("margin-left", "-23px"); this.splitBarButton.css("margin-top", "-0px") } this._layoutPanels() }, collapse: function () { if (this.disabled) { return } var a = -1; this.panels[0].collapsed = this.panels[1].collapsed = false; this.panels[0].element[0].style.visibility = "inherit"; this.panels[1].element[0].style.visibility = "inherit"; if (this.panels[0].collapsible) { a = 0 } else { if (this.panels[1].collapsible) { a = 1 } } if (a != -1) { this.panels[a].collapsed = true; this.panels[a].element[0].style.visibility = "hidden"; this.splitBar.addClass(this.toThemeProperty("EZNEW-splitter-splitbar-collapsed")); this._layoutPanels(); this._raiseEvent(2, { index: a, panels: this.panels }); this._raiseEvent(0, { panels: this.panels }) } }, expand: function () { if (this.disabled) { return } var a = -1; this.panels[0].collapsed = this.panels[1].collapsed = false; this.panels[0].element[0].style.visibility = "inherit"; this.panels[1].element[0].style.visibility = "inherit"; if (this.panels[0].collapsible) { a = 0 } else { if (this.panels[1].collapsible) { a = 1 } } if (a != -1) { this.panels[a].collapsed = false; this.panels[a].element[0].style.visibility = "inherit"; this.splitBar.removeClass(this.toThemeProperty("EZNEW-splitter-splitbar-collapsed")); this._layoutPanels(); this._raiseEvent(1, { index: a, panels: this.panels }); this._raiseEvent(0, { panels: this.panels }) } }, disable: function () { this.disabled = true; this.host.addClass(this.toThemeProperty("EZNEW-fill-state-disabled")); this.splitBar.addClass(this.toThemeProperty("EZNEW-splitter-splitbar-collapsed")); this.splitBarButton.addClass(this.toThemeProperty("EZNEW-splitter-splitbar-collapsed")) }, enable: function () { this.disabled = false; this.host.removeClass(this.toThemeProperty("EZNEW-fill-state-disabled")); this.splitBar.removeClass(this.toThemeProperty("EZNEW-splitter-splitbar-collapsed")); this.splitBarButton.removeClass(this.toThemeProperty("EZNEW-splitter-splitbar-collapsed")) }, refresh: function (a) { if (a != true) { this._arrange() } }, propertyChangedHandler: function (a, h, f, g) { if (h === "panels" || h === "orientation" || h === "showSplitBar") { a.render(); return } if (h === "touchMode") { a._isTouchDevice = g } if (h === "disabled") { if (g) { a.disable() } else { a.enable() } } else { if (h === "theme") { b.EZNEW.utilities.setTheme(f, g, a.host) } else { a.refresh() } } }, _layoutPanels: function () {
            var H = this; var A = this.orientation == "horizontal" ? "height" : "width"; var x = this.orientation == "horizontal" ? "top" : "left"; var F, z, M, w; var E = parseInt(this._splitBarSize) + 2;
            if (!this.showSplitBar) { E = 0 } var I = this.host[A](); var G = I / 100; var y = 1 / G; var B = y * E; var J = this.panel1; var K = this.panel2; var D = this.panels[0].size; if (this.panels[0].collapsed) { M = true } if (this.panels[1].collapsed) { w = true } F = this.panels[0].min; z = this.panels[1].min; if (z.toString().indexOf("%") != -1) { z = parseFloat(z) * G } if (F.toString().indexOf("%") != -1) { F = parseFloat(F) * G } if (this._isNested && this._isTouchDevice) { if (this.orientation == "horizontal") { J.width(this.host.width()); K.width(this.host.width()) } else { J.height(this.host.height()); K.height(this.host.height()) } } var L = function () { var d = H.panel1[A](); if (H.splitBar[0].style[x] != d + "px") { var c = d; if (H.orientation == "vertical") { H.splitBar[0].style.borderLeftColor = ""; H.splitBar[0].style.borderRightColor = ""; H.splitBarButton[0].style.width = parseInt(H._splitBarSize) + "px"; H.splitBarButton[0].style.left = "0px" } else { H.splitBar[0].style.borderTopColor = ""; H.splitBar[0].style.borderBottomColor = ""; H.splitBarButton[0].style.height = parseInt(H._splitBarSize) + "px"; H.splitBarButton[0].style.top = "0px" } if (H._hasBorder) { if (I - E == d) { if (H.orientation == "vertical") { H.splitBar[0].style.borderRightColor = "transparent"; H.splitBarButton[0].style.width = parseInt(H._splitBarSize + 1) + "px" } else { H.splitBar[0].style.borderBottomColor = "transparent"; H.splitBarButton[0].style.height = parseInt(H._splitBarSize + 1) + "px" } } else { if (d == 0) { if (H.orientation == "vertical") { H.splitBar[0].style.borderLeftColor = "transparent"; H.splitBarButton[0].style.width = parseInt(H._splitBarSize + 1) + "px"; H.splitBarButton[0].style.left = "-1px" } else { H.splitBar[0].style.borderTopColor = "transparent"; H.splitBarButton[0].style.height = parseInt(H._splitBarSize + 1) + "px"; H.splitBarButton[0].style.top = "-1px" } } } } H.splitBar[0].style[x] = c + "px" } if (H.panel2[0].style[x] != d + E + "px") { H.panel2[0].style[x] = d + E + "px" } }; if (M) { var P = Math.max(z, I - E); J[A](0); K[A](P) } else { if (w) { var P = Math.max(F, I - E); K[A](0); J[A](P) } else { if (D.toString().indexOf("%") != -1) { var O = 100 - parseFloat(D); J.css(A, parseFloat(D) + "%"); O -= B; K.css(A, O + "%"); var N = K[A](); if (N < z) { var P = N - z; var C = P * y; D = parseFloat(D) + parseFloat(C); var O = 100 - parseFloat(D); J.css(A, parseFloat(D) + "%"); O -= B; K.css(A, O + "%") } var a = J[A](); if (a < F) { var C = F * y; J.css(A, parseFloat(C) + "%") } } else { var N = I - D - E; if (J[0].style[A] != D + "px") { J[A](D) } if (K[0].style[A] != N + "px") { K[A](N) } if (N < z) { D += N - z; K[A](z); J[A](D) } if (D < F) { J[A](F) } } } } L(); this._raiseEvent(4, { panels: this.panels })
        }, destroy: function () { this._removeHandlers(); b.EZNEW.utilities.resize(this.host, null, true); this.host.remove() }, _raiseEvent: function (i, g) { var h = new b.Event(this._events[i]); h.owner = this; h.args = g; var j = this.orientation == "vertical" ? "width" : "height"; var a = new Array(); a[0] = {}; a[1] = {}; a[0].size = this.orientation == "vertical" ? this.panel1[0].offsetWidth : this.panel1[0].offsetHeight; a[1].size = this.orientation == "vertical" ? this.panel2[0].offsetWidth : this.panel2[0].offsetHeight; a[0].min = this.panels[0].min; a[1].min = this.panels[1].min; a[0].collapsible = this.panels[0].collapsible; a[1].collapsible = this.panels[1].collapsible; a[0].collapsed = this.panels[0].collapsed; a[1].collapsed = this.panels[1].collapsed; h.args.panels = a; return this.host.trigger(h) }
    })
}(EZNEWBaseFramework));